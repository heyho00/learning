# 번들러 세팅

```
npm init

npm install webpack-cli --save-dev

npm install webpack-dev-server babel-loader @babel/core @babel/preset-env @babel/preset-react html-webpack-plugin --save-dev
```

번들러는 웹팩이고 트랜스파일러 바벨도 필요.

<br>

## + webpack.config.js

node js 파일이다.
webpack에 입력값으로 config 파일을 제공해 주는 역할.

웹팩이 필요한 스펙 형태대로 객체를 export 해줘야한다.

```jsx

기본적인 구조
module.exports = {
  mode: "",
  entry: "",
  output: {},
  module: {},
  plugins: [],
};
```

웹팩은 엔트리에 지정된 js부터 입력을 받아
변환, 출력한다.

변환 과정에 어떤 일을 할지는 웹팩이 자체적으로 세팅하는게 아니라
지정 해줘야함.

플러그인은 하나의 파일을 만들어 낼때 처리할 일들을 위한 소프트웨어 공간, 프로세서.

그 플러그인에 n개의 소프트웨어들을 설정해주면
마지막 처리 과정에 개입해서 무언가를 할 수 있다.

#### ex)

es6이상의 문법 js를 입력받아
module에 es6이상의 js를 입력받아 es5로 변환해주는 트랜스파일러를 세팅할 수 있다.

플러그인에는 console.log라던지 주석 제거하는 플러그인을 세팅할 수 있다.

<br>

```jsx
const HtmlWebpackPlugin = require("html-webpack-plugin");
const path = require("path");

module.exports = {
  //mode -> 최종적으로 서비스할 파일인지 개발중 파일인지
  mode: "develpment",
  entry: "./app.js",
  output: {
    //어느 디렉토리에 어떤 이름
    // 다른 컴에서, os에서도 잘 돌아가기 위해 디렉토리명을 path를 이용해준다. node가 제공.
    path: path.resolve(__dirname, "dist"),
    filename: "bundle.js",
  },

  //개발 서버를 설정해준다.
  devServer: {
    compress: true,
    port: 9999,
  },

  module: {
    rules: [
      //룰안에 지정하는걸 loader라고 한다.
      {
        // js만 처리하게끔 babel은 돼있어서
        // css, image, json 등등 포맷의 파일들이
        // 웹팩에 들어오니 처리해줘야한다.
        // 필요없는 파일들은 제거하는 방법으로.(test)
        test: /\.js$/,
        exclude: /node_modules/,
        //정규식에 매칭되는 파일들만 로더에 보내줘.
        //node_modules에도 많은 js파일이 있어 제외해줘야한다.
        use: {
          loader: "babel-loader",
          options: {
            presets: ["@babel/preset-env", "@babel/preset-react"],
          },
        },
      },
    ],
  },
  plugins: [
    new htmlWebpackPlugin({
      //index.html의 title 그대로 넣어줌.
      title: "2.3 setupwebpack & babel",
      template: "index.html",
    }),
  ],
};
```

<br>
<br>

---

<br>

## + babel.config.json

```jsx
{
    "presets":["@babel/preset-env"]
}
```

번들링을 실행해야한다.

## package.json

```jsx
{
  "name": "2.3",
  "version": "1.0.0",
  "description": "",
  "main": "app.js",
  "scripts": {
    //빌드에 웹팩 디폴트로 webpack.config.js를 찾아 번들링이 실행.
    //이러면 번들링만 일어나 데브서버를 띄워야하니
    //dev도 설정.
    // -> npm run dev
    "build": "webpack",
    "dev": "webpack serve",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "@babel/core": "^7.15.8",
    "@babel/preset-env": "^7.15.8",
    "@babel/preset-react": "^7.14.5",
    "babel-loader": "^8.2.3",
    "html-webpack-plugin": "^5.5.0",
    "webpack-cli": "^4.9.1",
    "webpack-dev-server": "^4.3.1"
  }
}


```

<br>

- dev는 메모리에 내용이 들어가있고 실시간으로 바뀌는 내용이 반영되는 기능.

- `npm run build` 로 실행하면
  번들링만 되고 서버는 뜨지않음.
  -> dist 디렉토리가 생긴다.(안에 번들이 생김.)
