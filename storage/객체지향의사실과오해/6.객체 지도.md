# 6. 객체 지도

## 두 가지 재료 : 기능과 구조

객체지향 세계를 구축하기 위해서는 사용자에게 제공할 기능’과 기능을 담을 안정적인
‘구조’라는 재료가 준비돼 있어야 한다.

■ 구조는 사용자나 이해 관계자들이 도메인(domain)에 관해 생각하는 개념과 개념들간의 관계로 표현한다.

■ 기능은 사용자의 목표를 만족시키기 위해 책임을 수행하는 시스템의 행위로 표현한다.

일반적으로 기능을 수집하고 표현하기 위한 기법을 유스케이스 모델링

구조를 수집하고 표현하기 위한 기법을 도메인 모델링

<br>

## 안정적인 재료 : 구조

#### 도메인 모델

병원 - 환자기록 보관 조회
은행 - 자산관리, 보호
게임유저들 - 지루함을 해결

사용자가 프로그램을 사용하는 대상 분야를 도메인이라고 한다.

은행 업무에 종사하는 사람들은 은행 도메인을 고객과 계좌 사이의 돈의 흐름으로 이해 할 것이다.

중고 자동차 판매상은 구매되는 자동차와 판매되는 자동차의 교환으로 자동차 도메인을 바라볼 것이다.

게임 플레이어들은 게임 도메인을 캐릭터와 몬스터. 그리고 몬스터가 떨구는 아이템 간의 관계로 파악한다.

프로그래밍에 종사하는 사람들은 프로그래밍 도메인을 커피를 입력으로 코드를 출력하는 함수로 파악한다.

도메인 모델은 이해관계자들이 바라보는 `멘탈 모델(Mental Model)`이다. 멘탈 모델이란 사람들이 자기 자신, 다른 사람，환경, 자신이 상호작용하는 사물들에 대해 갖는 모형이다.

도널드 노먼(Donald Norman)은 제품을 설계할 때 제품에 관한 모든 것이 사용자들 이 제품에 대해 가지고 있는 멘탈 모델과 정확하게 일치해야 한다고 주장한다.

사용자들은 자신의 멘탈 모델과 유사한 방식으로 제품이 반응하고 움직일 것이 라고 기대하기 때문에 훌륭한 디자인이란 사용자가 예상하는 방식에 따라 정확하게 반 응하는 제품을 만드는 것이다.

<img src="../../image/mentalmodel.png" width="300px" />

사용자 모델은 사용자가 제품에 대해 가지고 있는 개념들의 모습이다. 디자인 모델은 설계자가 마음 속에 갖고 있는 시스템에 대한 개념화다. 시스템 이미지 는 최종 제품이다.

도메인 모델은 도메인에 대한 사용자 모델，디자인 모델, 시스템 이미지를 포괄하도록 추상화한 소프트웨어 모델이다. 따라서 도메인 모델은 소프트웨어에 대한 멘탈 모델 이다.

도널드 노먼의 주장을 요약하면 최종 제품은 사용자의 관점을 반영해야 한다는 것이 다. 이것은 소프트웨어 개발에도 동일하게 적용할 수 있다. 최종 코드는 사용자가 도메 인을 바라보는 관점을 반영해야 한다. 이것은 곧 애플리케이션이 도메인 모델을 기반
으로 설계돼야 한다는 것을 의미한다.

<br>

도메인 모델을 기반으로 코드를 작성하는 두 번째 이유는 도메인 모델이 제공하는 구조가 상대적으로 안정적이기 때문이다.

<img src="../../image/domain.png" width="300px" />

실제 운영되는 정기예금 상품을 매우 단순화한 것이지만 일반적으로 사람들이 정기예금에
관해 생각하는 개념과 규칙을 모두 포함하고 있다.

사용자 모델의 관점을 반영한다.

개념의 정의와 속성은 은행 업무에서 다뤄지는 정기예금의 정의가 변경되지 않는 한 쉽게 바뀌지 않을 것이다.

정기예금과 관련된 중요한 비즈니스 규칙과 정책을 반영하고 있다. 도메인 모델의 장점은 비즈니스의 개념과 정책을 반영하는 안정적인 구조를 제공한다는 것이다.

비록 도메인 모델이 도메인과 관련된 중요한 개념과 관계를 보여준다고 해도 실제로 사 용자에게 중요한 것은 도메인 모델이 아니라 소프트웨어의 기능이다.

소프트웨어의 존재 이유는 사용자가 원하는 목표를 달성할 수 있는 다양한 기능을 제공하는 것이다. 따 라서 사용자에게 제공할 기능을 기술한 정보가 필요하다. 객체지향 커뮤니티에서는 오 래 전부터 소프트웨어의 기능을 기술하기 위해 `유스케이스`라는 유용한 기법을 사용해왔다.

<br>

## 불안정한재료: 기능

유스케이스명: 중도 해지 이자액율 계산한다
일차 액터: 예금주
주요 성공 시나리오:

1. 예금주가 정기예금 계좌 선택.
2. 시스템은 정기예금 계좌 정보를 보여준다.
3. 예금주가 금일 기준으로 예금을 해지할 경우 지급받을 수 있는 이자 계산을 요청한다.
4. 시스템은 중도 해지 시 지급받을 수 있는 이자를 계산한 후 결과를 사용자에게 제공한다.

확장 : 사용자는 해지 일자를 다른 일자로 입력할 수 있다.

### usecase 특성.

1. 유스케이스는 사용자와 시스템 간의 상호작용을 보여주는 ‘텍스트’다. 유스케이 스는 다이어그램이 아니다.

2. 하나가 아닌 여러 시나리오들의 집합이다.

첫 번째 시나리오는 예 금주가 계좌를 선택하고 당일까지의 이자액을 계산하는 것이다. 두 번째 시나리오는 예금주가 계좌를 선택하고 특정 일자까지의 이자액을 계산하는 것이다.

3. 유스케이스는 단순한 피처(feature) 목록과 다르다.

피처는 시스템이 수행해야 하는 기능의 목록을 단순하게 나열한 것이다. 예제 유스케이스에서 피처는 ‘시스템은
정기예금 정보를 보여준다’와 ‘시스템은 당일이나 현재 일자의 이자를 계산한다’이다.
단점은 이 두 피처를 서로 연관이 없는 독립적인 기능으로 보이게끔 만든다는
점이다.

장점은 연관된 기능들을 함께 묶을 수 있다는 점.

4. 유스케이스는 사용자 인터페이스와 관련된 세부 정보를 포함하지 말아야 한다.
   자주 변경되 는 사용자 인터페이스 요소는 배제하고 사용자 관점에서 시스템의 행위에 초점을 맞 춘다.

5. 유스케이스는 내부 설계와 관련된 정보를 포함하지 않는다.

유스케이스의 목
적은 연관된 시스템의 기능을 이야기 형식으로 모으는 것이지 내부 설계를 설명하는 것 이 아니다.

### 유스케이스는 설계 기법도, 객체지향 기법도 아니다.

단지 사용자가 바라보는 시스템의 외부 관점만을 표현한다는 점에 주목 하라

유스케이스는 시스템의 내부 구조나 실행 메커니즘에 관한 어떤 정보도 제공하 지 않는다. 유스케이스에는 단지 사용자가 시스템을 통해 무엇을 얻을 수 있고 어떻게 상호작용할 수 있느냐에 관한 정보만 기술된다.

사실 유스케이스는 객체지향과도 상관이 없다.

<br>

## 재료합치기: 기능과 구조의 통합

도메인 모델, 유스케이스，그리고 책임-주도 설계

불안정한 기능을 안정적인 구조 안에 담음으로써 변경에 대한 파급효과를 최소화하는 것은 훌륭한 객체지향 설계자가 갖춰야 할 기본적인 설계 능력

도메인 모델은 안정적인 구조를 개념화하기 위해, 유스케이스는 불안정한 기능을 서술하기 위해 가장 일반적으로 사용되는 도구다.

변경에 유연한 소프트웨어를 만들기 위해서는 유스케이 스에 정리된 시스템의 기능을 도메인 모델을 기반으로 한 객체들의 책임으로 분배해야 한다.

시스템에 할당된 커다란 책임은 이제 시스템 안의 작은 규모의 객체들이 수행해야 하는 더 작은 규모의 책임으로 세분화된다.

책임-주도 설계 방법은 시스템의 기능을 역할과 책임을 수행하는 객체들의 협력 관계 로 바라보게 함으로써 두 가지 기본 재료인 유스케이스와 도메인 모델을 통합한다.

안정적인 도메인 모델을 기반으로 객체를 선택해 책임을 분배한다.

<br>

## 기능 변경을 흡수하는 안정적인 구조

도메인 모델을 기반으로 객체 구조를 설계하는 이유는 도메인 모 델이 안정적이기 때문이다. 도메인 모델이 안정적인 이유는 도메인 모델을 구성하는 요소가 다음과 같은 특징을 띠기 때문이다.

■ 도메인 모델을 구성하는 개념은 비즈니스가 없어지거나 완전히 개편되지 않는 한 안정적으로 유지된 다. 정기예금 도메인에서 정기예금과 계좌. 이자율. 이자란 개념은 정기예금이란 금융상품이 없어지거 나 완전히 개편되지 않는 한 안정적으로 유지되는 개념이다.

■ 도메인 모델을 구성하는 개념 간의 관계는 비즈니스 규칙을 기반으로 하기때문에 비즈니스 정책이 크게 변경되지 않는 한 안정적으로 유지된다. 정기예금 도메인에서 이자는 정기예금이 만기가 되거나 중 도 해지를 하는 경우에 힌해서 단 한 번 지급된다. 따라서 계좌와 이자 간의 0..1 관계는 이와 같은 핵심 적인 비즈니스 규칙이 변경되지 않는 한 동일하게 유지될 것이다.

결국 변경에 대한 파급효과를 최소화 하고 요구사항 변경에 유연하게 대응할 수 있는 시스템을 구축하기 위해 ~

안정적인 도메인 모델을 기반으로 시스템의 기능을 구현하라. 도메인 모델과 코드를 밀접하게 연관시키기 위해 노력하라. 그것이 유지보수하기 쉽고 유연한 객체지향 시스 템을 만드는 첫걸음이 될 것이다.

---

<br>
<br>
<br>
요약

# 6. 객체 지도

## 자주 변경되는 기능이 아니라 안정적인 구조를 따라 역할, 책임, 협력을 구성하라.

→ 훌륭한 제품에 대한 이해부터 시작한다.

훌륭한 제품은 훌륭한 기능을 제공하는 동시에 사용자가 원하는 새로운 기능을

정확히 빠르고 안정적으로 추가할 수 있는 제품이다.

그래서 변경에 유연하게 대처할 수 있는 안정적인 구조가 필요하다.

## 시스템을 이루는 두가지 재료 : 기능, 구조

일반적으로 기능을 수집하고 표현하기 위한 기법을 `유스케이스 모델링`,

구조를 수집하고 표현하기 위한 기법을 `도메인 모델링` 이라고 함.

## 도메인 모델

사용자가 프로그램을 사용하는 대상 분야이면서

사용자를 포함한 이해관계자들이 바라보는 `멘탈모델` .

사용자가 제품에 대해 가지고 있는 개념, 설계자가 갖고있는 개념, 시스템 이미지(최종 제품)를 포괄하도록 추상화한 소프트웨어 모델이다.

최종 제품은 사용자의 관점을 반영해야 한다.

→ 사용자 관점의 도메인 모델은 사람들이 일반적으로 해당 도메인에 대해 생각하는 개념과 규칙을 모두 포함하면서도 매우 단순화된 것이기 때문에 제공하는 구조가 상대적으로 안정적이다.

→ 정체, 뭐하는 놈인지.

도메인 모델을 구성하는 개념은 비즈니스가 없어지거나 완전히 개편되지 않는 한 안정적으로 유지된다.

ex) 은행 도메인 - 돈의 흐름 맡기고 찾고 / 중고차 딜러 - 차 사고팔고 /

## 유스케이스

기능적 요구사항이 담긴 시나리오.

시스템이 사용자에게 제공해야하는 기능의 목록을 정리한 것이지만 단순한 피처목록과는 다르다.

‘정기예금 정보를 보여준다', ‘당일이나 현재 일자의 이자를 계산한다’ 가 피처라면

서로 연관없는 독립적인 기능으로 보이게 되는데

‘중도 해지 이자액을 계산한다’ 라는 유스케이스로 묶으면 시스템 기능에 대한 의사소통이 유리해진다.

사용자 목표가 유스케이스의 핵심.

### 결론 :

### 변경에 유연한 소프트웨어를 만들기 위해서는 유스케이스에 정리된 시스템의 기능을 도메인 모델을 기반으로 한 객체들의 책임으로 분배해야 한다. ( 안정적인 도메인 모델을 기반으로 시스템의 기능을 구현하라.)

→ 불안정한 기능을 안정적인 구조 안에 담음으로써 변경에 대한 파급효과를 최소화한다.
