# 실행 컨텍스트

실행할 코드에 제공할 환경 정보들을 모아놓은 객체.

<br>

#### stack과 que

<img src="../../image/stackque.png" width="300" />

동일한 환경에 있는 코드들을 실행할 때 필요한 환경 정보를 모아 컨텍스트를 구성,

이를 콜 스택에 쌓고 가장 위에 쌓인 컨텍스트와 관련된 코드들을 실행하는 식으로 환경과 순서를 보장한다.

컨텍스트를 구성하는 법으로 전역공간과 악마로 취급받는 eval을 제외하면 함수를 실행하는 것이 있다.

<br>

---

<br>

## 컨텍스트에 담기는 정보

- variableEnvironment
  현재 컨텍스트 내의 식별자들에 대한 정보 + 외부 환경 정보. 선언 시점의 LexicalEnvironment의 스냅샷, 변경사항은 반영되지 않음.

<br>

- LexicalEnvironment
  처음에는 variableEnvironment와 같지만 변경 사항이 실시간으로 반영됨.
  <br>
- ThisBinding
  식별자가 바라봐야 할 대상 객체.

실행 컨텍스트를 생성할 때 variableEnvironment에 정보를 담고 이를 그대로 복사해서 lexical environment를 만들어 사용한다.

<br>

### environmentRecord

에는 현재 컨텍스트와 관련된 코드의 식별자 정보들이 저장됨.

변수 정보를 수집하는 과정으로 볼 수 있고 수집을 마쳤더라도 아직 실행컨텍스트가 관여할 코드들은 실행되기 전 상태.

코드가 실행되기 전임에도 불구 자바스크립트 엔진은 이미 해당 환경에 속한 코드의 변수명들을 모두 알고 있게 되는데,

식별자들을 최상단으로 끌어올려놓은 다음 실행하는 것처럼 보인다.
->호이스팅

<br>

---

<br>

## 함수 선언문과 함수 표현식

```jsx
function a() {} //함수 선언문. 함수명 a가 곧 변수명.
a(); //실행 ok

var b = function () {}; //익명 함수 표현식. 변수명 b가 함수명.
b(); //실행 ok

var c = function d() {}; //기명 함수 표현식.
c(); //실행 ok
d(); //에러 !
```

함수 선언문은 전체가 호이스팅되고
표현식은 선언부만 호이스팅 된다.

-> 실행 결과가 달라짐.
