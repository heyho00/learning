# Build your Own Hooks

## Extracting a Custom Hook 사용자 정의 후크 추출

두 JavaScript 함수 간에 논리를 공유하려면 이를 세 번째 함수로 추출합니다. 구성 요소와 후크는 모두 함수이므로 이것도 작동합니다!

custom hook은 use로 시작하고 다른 hook을 호출할 수 있는 javascript 함수입니다.

useFriendStatus custom hook을 살펴보자.

```jsx
import { useState, useEffect } from 'react';

function useFriendStatus(friendID) {
  const [isOnline, setIsOnline] = useState(null);

  useEffect(() => {
    function handleStatusChange(status) {
      setIsOnline(status.isOnline);
    }

    ChatAPI.subscribeToFriendStatus(friendID, handleStatusChange);
    return () => {
      ChatAPI.unsubscribeFromFriendStatus(friendID, handleStatusChange);
    };
  });

  return isOnline;
}


목표는 FriendStatus , FriendListItem 구성요소에서 중북된 논리를 제거하는 것이다.
둘 다 친구가 온라인 상태인지 알고 싶어한다.

function FriendStatus(props) {
  const isOnline = useFriendStatus(props.friend.id);

  if (isOnline === null) {
    return 'Loading...';
  }
  return isOnline ? 'Online' : 'Offline';
}




function FriendListItem(props) {
  const isOnline = useFriendStatus(props.friend.id);

  return (
    <li style={{ color: isOnline ? 'green' : 'black' }}>
      {props.friend.name}
    </li>
  );
}
```

#### custom hook은 상태 저장 로직을 재사용하는 매커니즘이지 상태 자체를 공유하지 않는다.

<br>

## hook 간에 정보 전달

hooks는 함수이기 때문에 hooks 간에 정보를 전달할 수 있습니다.

```jsx
const friendList = [
  { id: 1, name: 'Phoebe' },
  { id: 2, name: 'Rachel' },
  { id: 3, name: 'Ross' },
];

function ChatRecipientPicker() {
  const [recipientID, setRecipientID] = useState(1);
  const isRecipientOnline = useFriendStatus(recipientID);

  return (
    <>
      <Circle color={isRecipientOnline ? 'green' : 'red'} />
      <select
        value={recipientID}
        onChange={e => setRecipientID(Number(e.target.value))}
      >
        {friendList.map(friend => (
          <option key={friend.id} value={friend.id}>
            {friend.name}
          </option>
        ))}
      </select>
    </>
  );
}

현재 선택된 친구 ID를 recipientID상태 변수에 유지하고 사용자가 <select>선택기에서 다른 친구를 선택하면 업데이트합니다.

useState Hook 호출은 상태 변수의 최신 값을 제공하므로 사용자 정의 Hook useFriendsStatus에 인수로 recipinentID를 전달할 수 있습니다.

const [recipientID, setRecipientID] = useState(1);
const isRecipientOnline = useFriendStatus(recipientID);


이것은 현재 선택된 친구가 온라인 상태인지 여부를 알려준다.
```
